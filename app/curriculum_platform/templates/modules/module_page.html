{% extends "base.html" %}
{% load wagtailimages_tags %}

{% block content %}

<div class="module">
  <div class="row">
    <div class="col-md-11 offset-md-1">
      <div class="row">
      {% image module.hero_image width-1600 as hero %}
        <div id="hero_module" class="col" style="background: #0098b8 {% if module.hero_image %}url({{hero.url}}) no-repeat right{% endif %};">
          <div id="title" class="container col-md-6 col-xl-8 mt-5 ml-n5 py-5 pl-5 pr-3 float-left">
            <h2 class="red-text">{{ module.title|upper }}:</h2>
            <div id="subtitle" class="h4 font-italic">{{ module.subtitle|truncatewords:"100" }}</div>
            <div class="col d-lg-none ml-0 pl-0">
                  {% if module.teachers_guide %}
                  <h4><a href="{{ module.teachers_guide }}" target="_blank">Download Teacher's Guide</a></h4>
                  {% endif %}
                  <h4><a href="{{ request.build_absolute_uri }}student-page" target="_blank">View Student Page</a></h4>
            </div>
          </div>
        </div>
      </div>

      <div class="row p-5 d-block">
        <div class="col px-5">          
          <a class="btn btn-primary rounded-pill float-right mx-3 d-none d-xl-block" role="button" href="{{ module.teachers_guide }}" target="_blank">Teacher's Guide</a>
          <a class="btn btn-primary rounded-pill float-right mx-3 d-none d-lg-block" role="button" href="{{ module.teachers_guide }}" target="_blank">Download Full Module</a>
          <a class="btn btn-primary rounded-pill float-right mx-3 d-none d-lg-block" role="button" href="/curriculum/modules/{{ module.id }}/student-page" target="_blank">Student Page</a>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <ul id="tabs" class="nav nav-tabs" role="tablist">
            <li class="nav-item">
              <a id="tab-A" href="#pane-A" class="nav-link active" data-toggle="tab" role="tab">Overview</a>
            </li>
            <li class="nav-item">
              <a id="tab-B" href="#pane-B" class="nav-link" data-toggle="tab" role="tab">Details</a>
            </li>
            <li class="nav-item">
              <a id="tab-C" href="#pane-C" class="nav-link" data-toggle="tab" role="tab">Lessons</a>
            </li>
          </ul>
      
      
          <div id="content" class="tab-content mt-3 mt-lg-0" role="tablist">
            <div id="pane-A" class="card tab-pane fade show active" role="tabpanel" aria-labelledby="tab-A">
              <div class="card-header" role="tab" id="heading-A">
                <h5 class="mb-0">
                  <!-- Note: `data-parent` removed from here -->
                  <a data-toggle="collapse" href="#collapse-A" aria-expanded="true" aria-controls="collapse-A">
                    Module Overview
                  </a>
                </h5>
              </div>
    
              <!-- Note: New place of `data-parent` -->
              <div id="collapse-A" class="collapse show" data-parent="#content" role="tabpanel" aria-labelledby="heading-A">
                <div class="card-body">
                  {% if module.intro_copy %}
                  {{ module.intro_copy|safe }}
                  {% endif %}
                  <g:sharetoclassroom class="d-inline my-4" size=32 url="{{ request.build_absolute_uri }}student-page"></g:sharetoclassroom><h4 class="d-inline px-2">Link Student Page in Google Classroom</h4>
                </div>
              </div>
            </div>
      
            <div id="pane-B" class="card tab-pane fade" role="tabpanel" aria-labelledby="tab-B">
              <div class="card-header" role="tab" id="heading-B">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" href="#collapse-B" aria-expanded="false" aria-controls="collapse-B">
                    Details
                  </a>
                </h5>
              </div>
              <div id="collapse-B" class="collapse" data-parent="#content" role="tabpanel" aria-labelledby="heading-B">
                <div class="card-body">

                  {% if module.learning_outcomes %}
                  <h4>Learning Outcomes</h4>
                  {{ module.learning_outcomes|safe }}
                  {% endif %}

                  {% if module.time_estimate %}
                  <h4 class="my-2">Time Estimate: <small class="font-italic">{{ module.time_estimate }}</small></h4>
                  {% endif %}
                  
                  {% if module.module_audience_relationship.all|length > 0 %}
                  <h4 class="my-4">Audience: <small class="font-italic">
                  {% for audience in module.module_audience_relationship.all %} 
                    {{ audience.audience.age_range }} {% if not forloop.last %}&nbsp;&middot;&nbsp;{% endif %}
                  {% endfor %}
                  </small></h4>
                  {% endif %}
                  
                  {% if module.module_standards_relationship.all|length > 0 %}
                  <h4>Standards Alignment</h4>
                  <ul class="list-group">
                  {% for standard in module.module_standards_relationship.all %} 
                  {% if standard.standard %}

                  <li class="list-group-item">
                    <h5>{% if standard.standard.standard_link %}<a href="{{ standard.standard.standard_link }}" target="_blank">{% endif %}{{ standard.standard.standard_group.standards_body}}: {{ standard.standard.standard }}{% if standard.standard.standard_link %}</a>{% endif %}</h5>
                    {% if standard.standard.description %}<p class="ml-5">{{ standard.standard.description }}</p>{% endif %}
                  </li>

                  {% endif %}
                  {% endfor %}
                  </ul>
                  {% endif %}
                </div>
              </div>
            </div>
      
            <div id="pane-C" class="card tab-pane fade" role="tabpanel" aria-labelledby="tab-C">
              <div class="card-header" role="tab" id="heading-C">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" href="#collapse-C" aria-expanded="false" aria-controls="Lessons">
                    Lessons
                  </a>
                </h5>
              </div>
              <div id="collapse-C" class="collapse" role="tabpanel" data-parent="#content" aria-labelledby="heading-C">
                <div class="card-body p-3">
                  {% if module.teachers_desc %}
                  {{ module.teachers_desc }}
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
